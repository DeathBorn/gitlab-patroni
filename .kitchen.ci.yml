---
driver:
  name: digitalocean
  private_networking: false
  ipv6: false
  region: <%= ENV['GITLAB_DO_REGION'] || "nyc3" %>

provisioner:
  name: chef_zero
  data_bags_path: "test/data_bags"

platforms:
  - name: ubuntu-16-04-x64
    driver_config:
      server_name: <%= ENV['DIGITALOCEAN_TESTBOX_FQDN'] || "ubuntu-1604.template.gitlab-cookbooks.ci.gitlab.test" %>

# On CI, the ephemeral ed25519 key is generated by default
transport:
  ssh_key: "~/.ssh/id_ed25519"

verifier:
  name: inspec

# Rsync greatly speeds up copying chef data to DO instance
transport:
  name: rsync
  ssh_key: "~/.ssh/id_ed25519"
  username: root

# `make kitchen` will parse the number of suites and fire up corresponding number of threads
suites:
  - name: default
    run_list:
      - recipe[template::default]
    attributes: {}
